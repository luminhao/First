
 <!DOCTYPE html>
<!-- saved from url=(0033)https://demo.typecho.me/affinity/ -->
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">  
	<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
	<meta name="renderer" content="webkit">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
	 <title>喜马拉雅（中国）博客</title> <link rel="stylesheet" href="./树莓派 - 凤七的树莓派博客_files/style.css"> 
	 <meta name="description" content="凤七的树莓派博客"> <meta name="keywords" content="凤七"> 
	 <meta name="generator" content="Typecho 1.1/17.10.30"> <meta name="template" content="Affinity"> 
	 <link rel="pingback" href="https://demo.typecho.me/affinity/action/xmlrpc"> 
	 <link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://demo.typecho.me/affinity/action/xmlrpc?rsd"> 
	 <link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://demo.typecho.me/affinity/action/xmlrpc?wlw">
	  <link rel="alternate" type="application/rss+xml" title="树莓派 » RSS 2.0" href="https://demo.typecho.me/affinity/feed/"> 
	  <link rel="alternate" type="application/rdf+xml" title="树莓派 » RSS 1.0" href="https://demo.typecho.me/affinity/feed/rss/"> 
	  <link rel="alternate" type="application/atom+xml" title="树莓派 » ATOM 1.0" href="https://demo.typecho.me/affinity/feed/atom/">
	   <link href="./树莓派 - 凤七的树莓派博客_files/xcode.min.css" rel="stylesheet">
  <link href="./树莓派 - 凤七的树莓派博客_files/style.min.css" rel="stylesheet"> 
  <script type="text/javascript" src="jquery-1.8.3.js"></script>
</head> 
   <body>
   <!-- 头部 -->
   <header   id="header" class="header bg-white animated headroom--top headroom--not-bottom"> 
   		<div class="navbar-container" >
   		 <a href="#" style="float: left;margin-top: 10px;margin-left: -150px;" >
   		  <img src="images/logo.png	" width="100px;" alt="LiNPX"> </a>
   		  <span style="float: left;margin-left:-40px;font-weight: bold;">北大青鸟3181-博客项目作品-公元后2018年10月纪念</span>
   		   <div class="navbar-menu" style="margin-right: -180px;">
   		   <a href="https://www.linpx.com/about.html">关于我们</a> 
   		    <a href="login.action" th:if="${session.user==null}">登录</a>
   		    <img alt="" th:if="${session.user!=null}" style="border-radius: 50%;border: 2px solid rgba(202, 202, 255, 0.8);display: inline-block;
				    height: 50px;width: 50px;vertical-align: middle;box-sizing: border-box;max-width: none;" th:src="${session.user!=null?session.user.image:''}" src="">
				      <a href="user-view"   th:if="${session.user!=null}" th:text="'欢迎您，'+${session.user!=null?session.user.nickname:''}"></a>
				      <a href="exit-login" th:if="${session.user!=null}">退出登录</a>  		    					    
   		    </div>
   		      </div> 
   </header>

    <!--左选项  -->
    <section class="section" style="margin-top: 70px;">
     <section class="section-sidebar">
      <div class="sidebar-header">
       <a href="https://demo.typecho.me/affinity/" class="sidebar-header-logo">
        <img class="logo" alt="北大青鸟" src="images/affinity.png">
       </a> <p>博客小组结业项目</p> 
	       <ul class="nav"> 
		       <li><a class="current" href="index.action">首页</a></li> 
		       <li><a href="search-view" title="搜索"> <span class="icon-search"></span> 搜索</a></li>
		       <li><a href="fenlei-view" title="分类">分类</a></li> 
		       <li><a href="bk-view" title="写博客">写博客	</a></li> 
		       
	        </ul> 

        </div>
       <div class="sidebar-footer"></div> 
       </section>
       			<!--内容  -->
			<section class="section-content" id="content" role="main">
			 <article class="content-post post tag-jian-ti-zhong-wen" role="main">
			  <div class="content-post-title"> <h1 th:text="${article.atitle}"></h1> </div>
			   <div class="content-post-meta"> <time class="post-date" style="color: #3385ff" th:text="${#dates.format(article.adate, 'yyyy年MM月dd')}"></time>			   
			    · <a href="#" th:text="${article.type.tname}">默认分类</a>
			    .作者：<a href="#" th:text="${article.user.nickname}"></a>&nbsp;&nbsp;<span style="color: #da5b5b;" th:text="${article.contents.get(0).cid!=null?'已有['+article.contents.size()+']条评论':'此博客还没有评论'}"></span>
			    
			    </div> 
			    <div class="content-post-body">
			     
			     <p th:utext="${article.acontent}"></p>
			<!-- 内容图片 -->
			      </div>
<!-- 			       <div class="content-post-meta post-meta-tags"> 
			       <a href="#">标签</a> </div> -->
			 <!-- 评论 -->
			       <div class="content-post-author">
			        <div class="tile">
			         <div class="tile-icon">
						 </div>
			             </div> </div>
			             <div class="content-post-comments"> </div>
			              <div class="doc_comments"> 
			              	<script>function tg_c(id,nc){var e=document.getElementById(id);var c=e.className;if(!c){e.className=nc}else{var classArr=c.split(' ');var exist=false;for(var i=0;i<classArr.length;i++){if(classArr[i]===nc){classArr.splice(i,1);e.className=Array.prototype.join.call(classArr," ");exist=true;break}}if(!exist){classArr.push(nc);e.className=Array.prototype.join.call(classArr," ")}}}</script> 
			              <div id="comments" class="cf"> 
			              
			              <h5 th:text="${article.contents.get(0).cid!=null?'已有'+article.contents.size()+'条评论':'亲，此博客还没有评论'}"></h5> 
			              <ol class="comment-list">
			              
				              <li id="li-comment-8" class="c_p" th:if="${article.contents.get(0).cid!=null}" th:each="content:${article.contents}" > 
					              	<div id="comment-8"> 
					            	  <img class="avatar" th:src="${content.user.image!=null?content.user.image:'images/user_48px_26148_easyicon.net.png'}"  alt="Showfom"> 
					              	<div class="cp"> <p th:text="${content.content}">评论内容</p> <div class="cm"><span class="ca">
					             	 来自用户：<span   style="color: #3385ff;font-size: 15px;" th:text="${content.user.nickname}">用户昵称</span></span> <span th:text="'评论日期：'+${#dates.format(content.cdate, 'yyyy/MM/dd/hh:mm')}"></span>
					             	<span style="color: red;" th:text="|已有回复(${content.replycount})|" th:id="|count_${content.cid}|">已有回复(6666)</span>
					              <span class="cr">					             	 
					              	<a href="javascript:void()" rel="nofollow" th:onclick="|list_view('${content.cid}')|">查看回复</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="javascript:void()" th:onclick="|huifu('${session.user}','${content.cid}')|" rel="nofollow" >回复</a>	
					              	</span></div>
					          <!--回复内容  -->
					              	<div th:id="|context_${content.cid}|" style="display: none;" th:if="${session.user!=null}">
													<input type="text" th:name="|huifu_${content.cid}|" style="border:1px  solid #eee; height: 30px;width: 100%">
													<input type="button"  th:onclick="|sub_content('${content.cid}','${session.user.uid}')|" class="submit btn btn-primary" style="margin: 0px;margin-top:10px;float: right;" value="提交" >

					              	</div>
					            <!-- 回复列表 -->
					              	 <div  th:id="|list_view_${content.cid}|" style="display: none;"><ol id="list_value">
		              	 						              	 					              	
					              	 </ol></div>
					              	 
					              	 </div> </div> 
				              	</li> 			              	
							</ol>
			              <div id="respond-post-10" class="respond"> <div class="ccr">
			              <a id="cancel-comment-reply-link" href="#" rel="nofollow" style="display:none" onclick="return TypechoComment.cancelReply();">取消回复</a></div> 
			              <h5 class="response" style="font-size: 30px;">发表新评论</h5> 
			              <form action="add_content"  method="post">
			              	 <div class="tbox">
			              	 <input name="aid" type="hidden" th:value="${article.aid}">
			              	 <input name="auid" type="hidden"th:value="${article.user.uid}">
			              	 <input name="aatitle" type="hidden"th:value="${article.atitle}">
			              	 <input name="uid" type="hidden" th:value="${session.user!=null?session.user.uid:''}">
			              	 <textarea required="required"  th:readonly="${session.user==null}" th:placeholder="${session.user==null?'请先登录呦':'请输入评论内容'}"  name="content" id="textarea" class="ci"  placeholder="请在这里输入你的评论内容"></textarea></div>
			              	  <button   th:disabled="${session.user==null}" class="submit btn btn-primary" onclick="pinglun">提交评论	</button>  </form></div> </div> </div> </article> </section>

           <section class="section-footer" style="padding: 0px;">
            <p>
            <strong><a href="#">喜马拉雅国际集团（中国）有限公司</a></strong></p> 
            
             <p>© 2018 All Rights Reserved.Theme Design by <a href="https://github.com/Showfom/Affinity" title="Ghost Theme Affinity" >Affinity</a> <span class="text-red">♥</span></p>
              </section> 
              </section>   
    <script type="text/javascript">
    	function list_view(rcid,sub){
        		if($("#list_view_"+rcid).css("display")=='none'){
        			$.post("allreply",{rcid:rcid},function(data){        				
        				var replys = $.parseJSON(data); 
        				$("#count_"+rcid).html("已有回复("+replys.length+")");
        				
        				if(replys==""){
        					alert("此评论还没有回复");
        				}else{
       					 $("#list_view_"+rcid).html("");
        				 $.each(replys, function(i,reply){
    						$("#list_view_"+rcid).append("	<li style='list-style: none;'><img class='avatar' style='float: none;display: inline;' src='"+reply.uimage+"'  alt='Showfom'><span style='color: #3385ff'>"+reply.unickname+":</span>&nbsp;&nbsp;<span style='font-size: 10px;'>回复日期："+reply.rdate+"</span>&nbsp;&nbsp;&nbsp;&nbsp;<span>"+reply.rcontent+"</span></li>");
        				  });        					
        				}

        			});
                    $("#list_view_"+rcid).slideDown();
                 }else{
                	 if(sub!=1){
                		 $("#list_view_"+rcid).slideUp();
                	 }else{              		 
             			$.post("allreply",{rcid:rcid},function(data){
            				var replys = $.parseJSON(data); 
        					 $("#list_view_"+rcid).html("");
            				 $.each(replys, function(i,reply){
         						$("#list_view_"+rcid).append("	<li style='list-style: none;'><img class='avatar' style='float: none;display: inline;' src='"+reply.uimage+"'  alt='Showfom'><span style='color: #3385ff'>"+reply.unickname+":</span>&nbsp;&nbsp;<span style='font-size: 10px;'>回复日期："+reply.rdate+"</span>&nbsp;&nbsp;&nbsp;&nbsp;<span>"+reply.rcontent+"</span></li>");
            				  }); 
            			});
                	 }               	                	                     
                 }   			   				
    	}
    	function huifu(user,cid){
    		if(user=="null"){
    			alert('请先登录');
    		}
    		if($("#context_"+cid).css("display")=='none'){
                $("#context_"+cid).slideDown();
             }else{
                $("#context_"+cid).slideUp();
             }
    	}
    	/*  提交评论*/
    	function sub_content(cid,uid){
    		var rcontent=$("input[name='huifu_"+cid+"']").val();
    		$.post("insertreply",{rcontent:rcontent,rcid:cid,ruid:uid},function(data){
    			if(data==1){
    				list_view(cid,'1'); 	                
    			}  			
    		});
    	}
    </script>
    </body></html>